App Flow Doc - Zen Meditation Game MVP

The application starts and checks the user's authentication status using Firebase Authentication. If the user is not logged in, they are presented with the Authentication Screen, offering options to navigate to either the Login Screen or the Signup Screen.

On the Signup Screen, the user enters their email address, chooses a username, and sets a password. Upon successful submission and validation (including a check for username uniqueness via a backend function), a new user account is created in Firebase Authentication, a corresponding user document is created in Firestore via a Cloud Function, and the user is navigated to the Home Screen.

On the Login Screen, the user enters their registered email and password. Upon successful authentication with Firebase, the user is navigated to the Home Screen.

The Home Screen is the main hub. The user sees their animated or static Mini Zenni avatar prominently displayed. Key stats like the current XP bar towards the next level, total Zen Tokens, and the current meditation Streak are visible. If the user has not completed their Daily Check-in for the current day (based on stored history), a card prompts them to do so. Another card invites the user to start a Meditation Session. There is persistent navigation, likely a bottom tab bar, allowing access to Home, Zenni Wardrobe, and the Guru Mode teaser screen.

Tapping the Daily Check-in card navigates the user to the Daily Check-in Screen. Here, they see the prompt "How zen have you felt lately?" and interact with a 1-to-5 scale input. An optional text input field allows for a brief reflection. Submitting this saves the check-in data (rating, reflection text, timestamp) to the user's history in Firestore and navigates the user back to the Home Screen, where the check-in prompt card should now be hidden for the day.

Tapping the Start Meditation card on the Home Screen navigates the user to the Meditation Selection Screen. This screen presents choices for the type of meditation, such as "Calm," "Focus," or "Sleep," each likely associated with a 5 or 10-minute duration option. Selecting a meditation type and duration navigates the user to the Meditation Session Screen.

The Meditation Session Screen displays the active countdown timer for the selected duration. A designated interactive area on the screen guides the user visually or textually to move their thumb upwards during inhale and downwards during exhale, matching a suggested rhythm. If the user's timing deviates significantly, subtle haptic feedback is triggered. An "I Did It" button is always visible, allowing the user to bypass the breath tracking and complete the session manually. Once the timer reaches zero, or if the user presses the "I Did It" button, the app triggers a backend function to record the session and calculate rewards, then navigates the user to the Post-Session Summary Screen.

The Post-Session Summary Screen displays the results of the completed meditation. This includes the calculated Breath Score as a percentage (if tracking was used, otherwise indicates fallback), the amount of XP gained, the number of Zen Tokens earned, and the user's current Streak count. A brief, one or two-sentence micro-lesson related to mindfulness or the app's lore is also shown. A confirmation button, like "Done" or "Continue," navigates the user back to the Home Screen. A small visual indicator might briefly appear here or on the Home screen if the user's Mini Zenni leveled up as a result of the earned XP.

From the main navigation, selecting "Wardrobe" takes the user to the Zenni Wardrobe Screen. This screen displays the outfits available for Mini Zenni, likely in a horizontally scrolling carousel or a grid. Outfits the user has unlocked (initially just the default one) are fully visible and selectable. Locked outfits are visually distinct (e.g., greyed out, with a lock icon). Tapping an unlocked outfit shows a preview of Mini Zenni wearing it within this screen. An "Equip" button becomes active for selected unlocked outfits; tapping it updates the user's profile in Firestore to set this as the current_outfit. The user navigates away from the Wardrobe screen (e.g., back to Home) via the main navigation, and the change persists.

From the main navigation, selecting "Guru Mode" takes the user to the Guru Mode Screen. This is a non-interactive teaser screen for the MVP. It displays text such as "Your Mini Zenni will channel wisdom from Zenni soon," potentially with some sample philosophical questions or "Coming Soon" artwork, indicating this feature is planned for a future release. The only action is to navigate away using the main navigation.

